// Package generated provides primitives to interact with the openapi HTTP API.
//
// Code generated by github.com/oapi-codegen/oapi-codegen/v2 version v2.5.1 DO NOT EDIT.
package generated

import (
	"bytes"
	"compress/gzip"
	"encoding/base64"
	"fmt"
	"net/http"
	"net/url"
	"path"
	"strings"
	"time"

	"github.com/getkin/kin-openapi/openapi3"
	"github.com/gin-gonic/gin"
	"github.com/oapi-codegen/runtime"
	openapi_types "github.com/oapi-codegen/runtime/types"
)

const (
	BearerAuthScopes = "BearerAuth.Scopes"
)

// Defines values for CreateUserRequestRole.
const (
	CreateUserRequestRoleAdmin CreateUserRequestRole = "admin"
	CreateUserRequestRoleGuest CreateUserRequestRole = "guest"
	CreateUserRequestRoleUser  CreateUserRequestRole = "user"
)

// Defines values for UpdateUserRequestRole.
const (
	UpdateUserRequestRoleAdmin UpdateUserRequestRole = "admin"
	UpdateUserRequestRoleGuest UpdateUserRequestRole = "guest"
	UpdateUserRequestRoleUser  UpdateUserRequestRole = "user"
)

// Defines values for UserRole.
const (
	UserRoleAdmin UserRole = "admin"
	UserRoleGuest UserRole = "guest"
	UserRoleUser  UserRole = "user"
)

// Defines values for UserDataRole.
const (
	UserDataRoleAdmin UserDataRole = "admin"
	UserDataRoleGuest UserDataRole = "guest"
	UserDataRoleUser  UserDataRole = "user"
)

// AuthResponse defines model for AuthResponse.
type AuthResponse struct {
	// Token JWT authentication token
	Token string   `json:"token"`
	User  UserData `json:"user"`
}

// CreateProductRequest defines model for CreateProductRequest.
type CreateProductRequest struct {
	Category    *string `json:"category"`
	Description *string `json:"description"`
	Name        string  `json:"name"`
	Price       float64 `json:"price"`
	Stock       int     `json:"stock"`
}

// CreateUserRequest defines model for CreateUserRequest.
type CreateUserRequest struct {
	Email openapi_types.Email `json:"email"`
	Name  string              `json:"name"`

	// Password User password (will be hashed)
	Password string                 `json:"password"`
	Role     *CreateUserRequestRole `json:"role,omitempty"`
}

// CreateUserRequestRole defines model for CreateUserRequest.Role.
type CreateUserRequestRole string

// Error defines model for Error.
type Error struct {
	Code    *string              `json:"code,omitempty"`
	Errors  *map[string][]string `json:"errors,omitempty"`
	Message string               `json:"message"`
}

// LoginRequest defines model for LoginRequest.
type LoginRequest struct {
	// Email User email address
	Email openapi_types.Email `json:"email"`

	// Password User password
	Password string `json:"password"`
}

// MeResponse defines model for MeResponse.
type MeResponse struct {
	// Email Current user email
	Email *openapi_types.Email `json:"email,omitempty"`

	// Role Current user role
	Role *string `json:"role,omitempty"`

	// UserId Current user UUID
	UserId *openapi_types.UUID `json:"user_id,omitempty"`
}

// Meta defines model for Meta.
type Meta struct {
	Page       *int `json:"page,omitempty"`
	PerPage    *int `json:"per_page,omitempty"`
	Total      *int `json:"total,omitempty"`
	TotalPages *int `json:"total_pages,omitempty"`
}

// PaginationParams defines model for PaginationParams.
type PaginationParams struct {
	Page    *int `json:"page,omitempty"`
	PerPage *int `json:"per_page,omitempty"`
}

// Product defines model for Product.
type Product struct {
	// Category Product category
	Category *string `json:"category"`

	// CreatedAt Creation timestamp
	CreatedAt *time.Time `json:"created_at,omitempty"`

	// Description Product description
	Description *string `json:"description"`

	// Id Product UUID
	Id openapi_types.UUID `json:"id"`

	// Name Product name
	Name string `json:"name"`

	// Price Product price
	Price float64 `json:"price"`

	// Stock Stock quantity
	Stock int `json:"stock"`

	// UpdatedAt Last update timestamp
	UpdatedAt *time.Time `json:"updated_at,omitempty"`
}

// RegisterRequest defines model for RegisterRequest.
type RegisterRequest struct {
	// Email Valid email address
	Email openapi_types.Email `json:"email"`

	// Name Full name of the user
	Name string `json:"name"`

	// Password Password (minimum 6 characters)
	Password string `json:"password"`
}

// UpdateUserRequest defines model for UpdateUserRequest.
type UpdateUserRequest struct {
	Email    *openapi_types.Email `json:"email,omitempty"`
	IsActive *bool                `json:"is_active,omitempty"`
	Name     *string              `json:"name,omitempty"`

	// Password New password (optional, will be hashed)
	Password *string                `json:"password,omitempty"`
	Role     *UpdateUserRequestRole `json:"role,omitempty"`
}

// UpdateUserRequestRole defines model for UpdateUserRequest.Role.
type UpdateUserRequestRole string

// User defines model for User.
type User struct {
	// CreatedAt User creation timestamp
	CreatedAt *time.Time `json:"created_at,omitempty"`

	// Email User's email address
	Email openapi_types.Email `json:"email"`

	// Id User UUID
	Id openapi_types.UUID `json:"id"`

	// IsActive Whether the user is active
	IsActive *bool `json:"is_active,omitempty"`

	// Name User's full name
	Name string `json:"name"`

	// Role User role
	Role *UserRole `json:"role,omitempty"`

	// UpdatedAt User last update timestamp
	UpdatedAt *time.Time `json:"updated_at,omitempty"`
}

// UserRole User role
type UserRole string

// UserData defines model for UserData.
type UserData struct {
	// Email User's email address
	Email openapi_types.Email `json:"email"`

	// Id User UUID
	Id openapi_types.UUID `json:"id"`

	// IsActive Whether the user account is active
	IsActive bool `json:"is_active"`

	// Name User's full name
	Name string `json:"name"`

	// Role User role
	Role UserDataRole `json:"role"`
}

// UserDataRole User role
type UserDataRole string

// IdParam defines model for IdParam.
type IdParam = openapi_types.UUID

// PageParam defines model for PageParam.
type PageParam = int

// PerPageParam defines model for PerPageParam.
type PerPageParam = int

// BadRequest defines model for BadRequest.
type BadRequest = Error

// Conflict defines model for Conflict.
type Conflict = Error

// Forbidden defines model for Forbidden.
type Forbidden = Error

// InternalServerError defines model for InternalServerError.
type InternalServerError = Error

// NotFound defines model for NotFound.
type NotFound = Error

// Unauthorized defines model for Unauthorized.
type Unauthorized = Error

// ListProductsParams defines parameters for ListProducts.
type ListProductsParams struct {
	// Page Page number
	Page *PageParam `form:"page,omitempty" json:"page,omitempty"`

	// PerPage Items per page
	PerPage *PerPageParam `form:"per_page,omitempty" json:"per_page,omitempty"`
}

// ListUsersParams defines parameters for ListUsers.
type ListUsersParams struct {
	// Page Page number
	Page *PageParam `form:"page,omitempty" json:"page,omitempty"`

	// PerPage Items per page
	PerPage *PerPageParam `form:"per_page,omitempty" json:"per_page,omitempty"`
}

// LoginJSONRequestBody defines body for Login for application/json ContentType.
type LoginJSONRequestBody = LoginRequest

// RegisterJSONRequestBody defines body for Register for application/json ContentType.
type RegisterJSONRequestBody = RegisterRequest

// CreateProductJSONRequestBody defines body for CreateProduct for application/json ContentType.
type CreateProductJSONRequestBody = CreateProductRequest

// UpdateProductJSONRequestBody defines body for UpdateProduct for application/json ContentType.
type UpdateProductJSONRequestBody = CreateProductRequest

// CreateUserJSONRequestBody defines body for CreateUser for application/json ContentType.
type CreateUserJSONRequestBody = CreateUserRequest

// UpdateUserJSONRequestBody defines body for UpdateUser for application/json ContentType.
type UpdateUserJSONRequestBody = UpdateUserRequest

// ServerInterface represents all server handlers.
type ServerInterface interface {
	// Login user
	// (POST /auth/login)
	Login(c *gin.Context)
	// Get current user
	// (GET /auth/me)
	GetCurrentUser(c *gin.Context)
	// Register new user
	// (POST /auth/register)
	Register(c *gin.Context)
	// Get all products
	// (GET /products)
	ListProducts(c *gin.Context, params ListProductsParams)
	// Create new product
	// (POST /products)
	CreateProduct(c *gin.Context)
	// Delete product
	// (DELETE /products/{id})
	DeleteProduct(c *gin.Context, id IdParam)
	// Get product by ID
	// (GET /products/{id})
	GetProduct(c *gin.Context, id IdParam)
	// Update product
	// (PUT /products/{id})
	UpdateProduct(c *gin.Context, id IdParam)
	// Get all users
	// (GET /users)
	ListUsers(c *gin.Context, params ListUsersParams)
	// Create new user
	// (POST /users)
	CreateUser(c *gin.Context)
	// Delete user
	// (DELETE /users/{id})
	DeleteUser(c *gin.Context, id IdParam)
	// Get user by ID
	// (GET /users/{id})
	GetUser(c *gin.Context, id IdParam)
	// Update user
	// (PUT /users/{id})
	UpdateUser(c *gin.Context, id IdParam)
}

// ServerInterfaceWrapper converts contexts to parameters.
type ServerInterfaceWrapper struct {
	Handler            ServerInterface
	HandlerMiddlewares []MiddlewareFunc
	ErrorHandler       func(*gin.Context, error, int)
}

type MiddlewareFunc func(c *gin.Context)

// Login operation middleware
func (siw *ServerInterfaceWrapper) Login(c *gin.Context) {

	for _, middleware := range siw.HandlerMiddlewares {
		middleware(c)
		if c.IsAborted() {
			return
		}
	}

	siw.Handler.Login(c)
}

// GetCurrentUser operation middleware
func (siw *ServerInterfaceWrapper) GetCurrentUser(c *gin.Context) {

	c.Set(BearerAuthScopes, []string{"user", "admin"})

	for _, middleware := range siw.HandlerMiddlewares {
		middleware(c)
		if c.IsAborted() {
			return
		}
	}

	siw.Handler.GetCurrentUser(c)
}

// Register operation middleware
func (siw *ServerInterfaceWrapper) Register(c *gin.Context) {

	for _, middleware := range siw.HandlerMiddlewares {
		middleware(c)
		if c.IsAborted() {
			return
		}
	}

	siw.Handler.Register(c)
}

// ListProducts operation middleware
func (siw *ServerInterfaceWrapper) ListProducts(c *gin.Context) {

	var err error

	c.Set(BearerAuthScopes, []string{})

	// Parameter object where we will unmarshal all parameters from the context
	var params ListProductsParams

	// ------------- Optional query parameter "page" -------------

	err = runtime.BindQueryParameter("form", true, false, "page", c.Request.URL.Query(), &params.Page)
	if err != nil {
		siw.ErrorHandler(c, fmt.Errorf("Invalid format for parameter page: %w", err), http.StatusBadRequest)
		return
	}

	// ------------- Optional query parameter "per_page" -------------

	err = runtime.BindQueryParameter("form", true, false, "per_page", c.Request.URL.Query(), &params.PerPage)
	if err != nil {
		siw.ErrorHandler(c, fmt.Errorf("Invalid format for parameter per_page: %w", err), http.StatusBadRequest)
		return
	}

	for _, middleware := range siw.HandlerMiddlewares {
		middleware(c)
		if c.IsAborted() {
			return
		}
	}

	siw.Handler.ListProducts(c, params)
}

// CreateProduct operation middleware
func (siw *ServerInterfaceWrapper) CreateProduct(c *gin.Context) {

	c.Set(BearerAuthScopes, []string{})

	for _, middleware := range siw.HandlerMiddlewares {
		middleware(c)
		if c.IsAborted() {
			return
		}
	}

	siw.Handler.CreateProduct(c)
}

// DeleteProduct operation middleware
func (siw *ServerInterfaceWrapper) DeleteProduct(c *gin.Context) {

	var err error

	// ------------- Path parameter "id" -------------
	var id IdParam

	err = runtime.BindStyledParameterWithOptions("simple", "id", c.Param("id"), &id, runtime.BindStyledParameterOptions{Explode: false, Required: true})
	if err != nil {
		siw.ErrorHandler(c, fmt.Errorf("Invalid format for parameter id: %w", err), http.StatusBadRequest)
		return
	}

	c.Set(BearerAuthScopes, []string{})

	for _, middleware := range siw.HandlerMiddlewares {
		middleware(c)
		if c.IsAborted() {
			return
		}
	}

	siw.Handler.DeleteProduct(c, id)
}

// GetProduct operation middleware
func (siw *ServerInterfaceWrapper) GetProduct(c *gin.Context) {

	var err error

	// ------------- Path parameter "id" -------------
	var id IdParam

	err = runtime.BindStyledParameterWithOptions("simple", "id", c.Param("id"), &id, runtime.BindStyledParameterOptions{Explode: false, Required: true})
	if err != nil {
		siw.ErrorHandler(c, fmt.Errorf("Invalid format for parameter id: %w", err), http.StatusBadRequest)
		return
	}

	c.Set(BearerAuthScopes, []string{})

	for _, middleware := range siw.HandlerMiddlewares {
		middleware(c)
		if c.IsAborted() {
			return
		}
	}

	siw.Handler.GetProduct(c, id)
}

// UpdateProduct operation middleware
func (siw *ServerInterfaceWrapper) UpdateProduct(c *gin.Context) {

	var err error

	// ------------- Path parameter "id" -------------
	var id IdParam

	err = runtime.BindStyledParameterWithOptions("simple", "id", c.Param("id"), &id, runtime.BindStyledParameterOptions{Explode: false, Required: true})
	if err != nil {
		siw.ErrorHandler(c, fmt.Errorf("Invalid format for parameter id: %w", err), http.StatusBadRequest)
		return
	}

	c.Set(BearerAuthScopes, []string{})

	for _, middleware := range siw.HandlerMiddlewares {
		middleware(c)
		if c.IsAborted() {
			return
		}
	}

	siw.Handler.UpdateProduct(c, id)
}

// ListUsers operation middleware
func (siw *ServerInterfaceWrapper) ListUsers(c *gin.Context) {

	var err error

	c.Set(BearerAuthScopes, []string{"admin"})

	// Parameter object where we will unmarshal all parameters from the context
	var params ListUsersParams

	// ------------- Optional query parameter "page" -------------

	err = runtime.BindQueryParameter("form", true, false, "page", c.Request.URL.Query(), &params.Page)
	if err != nil {
		siw.ErrorHandler(c, fmt.Errorf("Invalid format for parameter page: %w", err), http.StatusBadRequest)
		return
	}

	// ------------- Optional query parameter "per_page" -------------

	err = runtime.BindQueryParameter("form", true, false, "per_page", c.Request.URL.Query(), &params.PerPage)
	if err != nil {
		siw.ErrorHandler(c, fmt.Errorf("Invalid format for parameter per_page: %w", err), http.StatusBadRequest)
		return
	}

	for _, middleware := range siw.HandlerMiddlewares {
		middleware(c)
		if c.IsAborted() {
			return
		}
	}

	siw.Handler.ListUsers(c, params)
}

// CreateUser operation middleware
func (siw *ServerInterfaceWrapper) CreateUser(c *gin.Context) {

	c.Set(BearerAuthScopes, []string{"admin"})

	for _, middleware := range siw.HandlerMiddlewares {
		middleware(c)
		if c.IsAborted() {
			return
		}
	}

	siw.Handler.CreateUser(c)
}

// DeleteUser operation middleware
func (siw *ServerInterfaceWrapper) DeleteUser(c *gin.Context) {

	var err error

	// ------------- Path parameter "id" -------------
	var id IdParam

	err = runtime.BindStyledParameterWithOptions("simple", "id", c.Param("id"), &id, runtime.BindStyledParameterOptions{Explode: false, Required: true})
	if err != nil {
		siw.ErrorHandler(c, fmt.Errorf("Invalid format for parameter id: %w", err), http.StatusBadRequest)
		return
	}

	c.Set(BearerAuthScopes, []string{"admin"})

	for _, middleware := range siw.HandlerMiddlewares {
		middleware(c)
		if c.IsAborted() {
			return
		}
	}

	siw.Handler.DeleteUser(c, id)
}

// GetUser operation middleware
func (siw *ServerInterfaceWrapper) GetUser(c *gin.Context) {

	var err error

	// ------------- Path parameter "id" -------------
	var id IdParam

	err = runtime.BindStyledParameterWithOptions("simple", "id", c.Param("id"), &id, runtime.BindStyledParameterOptions{Explode: false, Required: true})
	if err != nil {
		siw.ErrorHandler(c, fmt.Errorf("Invalid format for parameter id: %w", err), http.StatusBadRequest)
		return
	}

	c.Set(BearerAuthScopes, []string{"admin"})

	for _, middleware := range siw.HandlerMiddlewares {
		middleware(c)
		if c.IsAborted() {
			return
		}
	}

	siw.Handler.GetUser(c, id)
}

// UpdateUser operation middleware
func (siw *ServerInterfaceWrapper) UpdateUser(c *gin.Context) {

	var err error

	// ------------- Path parameter "id" -------------
	var id IdParam

	err = runtime.BindStyledParameterWithOptions("simple", "id", c.Param("id"), &id, runtime.BindStyledParameterOptions{Explode: false, Required: true})
	if err != nil {
		siw.ErrorHandler(c, fmt.Errorf("Invalid format for parameter id: %w", err), http.StatusBadRequest)
		return
	}

	c.Set(BearerAuthScopes, []string{"admin"})

	for _, middleware := range siw.HandlerMiddlewares {
		middleware(c)
		if c.IsAborted() {
			return
		}
	}

	siw.Handler.UpdateUser(c, id)
}

// GinServerOptions provides options for the Gin server.
type GinServerOptions struct {
	BaseURL      string
	Middlewares  []MiddlewareFunc
	ErrorHandler func(*gin.Context, error, int)
}

// RegisterHandlers creates http.Handler with routing matching OpenAPI spec.
func RegisterHandlers(router gin.IRouter, si ServerInterface) {
	RegisterHandlersWithOptions(router, si, GinServerOptions{})
}

// RegisterHandlersWithOptions creates http.Handler with additional options
func RegisterHandlersWithOptions(router gin.IRouter, si ServerInterface, options GinServerOptions) {
	errorHandler := options.ErrorHandler
	if errorHandler == nil {
		errorHandler = func(c *gin.Context, err error, statusCode int) {
			c.JSON(statusCode, gin.H{"msg": err.Error()})
		}
	}

	wrapper := ServerInterfaceWrapper{
		Handler:            si,
		HandlerMiddlewares: options.Middlewares,
		ErrorHandler:       errorHandler,
	}

	router.POST(options.BaseURL+"/auth/login", wrapper.Login)
	router.GET(options.BaseURL+"/auth/me", wrapper.GetCurrentUser)
	router.POST(options.BaseURL+"/auth/register", wrapper.Register)
	router.GET(options.BaseURL+"/products", wrapper.ListProducts)
	router.POST(options.BaseURL+"/products", wrapper.CreateProduct)
	router.DELETE(options.BaseURL+"/products/:id", wrapper.DeleteProduct)
	router.GET(options.BaseURL+"/products/:id", wrapper.GetProduct)
	router.PUT(options.BaseURL+"/products/:id", wrapper.UpdateProduct)
	router.GET(options.BaseURL+"/users", wrapper.ListUsers)
	router.POST(options.BaseURL+"/users", wrapper.CreateUser)
	router.DELETE(options.BaseURL+"/users/:id", wrapper.DeleteUser)
	router.GET(options.BaseURL+"/users/:id", wrapper.GetUser)
	router.PUT(options.BaseURL+"/users/:id", wrapper.UpdateUser)
}

// Base64 encoded, gzipped, json marshaled Swagger object
var swaggerSpec = []string{

	"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",
	"3tZsvLVIrebeOQVTnz5M/xMAAP//UJ/XkUA7AAA=",
}

// GetSwagger returns the content of the embedded swagger specification file
// or error if failed to decode
func decodeSpec() ([]byte, error) {
	zipped, err := base64.StdEncoding.DecodeString(strings.Join(swaggerSpec, ""))
	if err != nil {
		return nil, fmt.Errorf("error base64 decoding spec: %w", err)
	}
	zr, err := gzip.NewReader(bytes.NewReader(zipped))
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}
	var buf bytes.Buffer
	_, err = buf.ReadFrom(zr)
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}

	return buf.Bytes(), nil
}

var rawSpec = decodeSpecCached()

// a naive cached of a decoded swagger spec
func decodeSpecCached() func() ([]byte, error) {
	data, err := decodeSpec()
	return func() ([]byte, error) {
		return data, err
	}
}

// Constructs a synthetic filesystem for resolving external references when loading openapi specifications.
func PathToRawSpec(pathToFile string) map[string]func() ([]byte, error) {
	res := make(map[string]func() ([]byte, error))
	if len(pathToFile) > 0 {
		res[pathToFile] = rawSpec
	}

	return res
}

// GetSwagger returns the Swagger specification corresponding to the generated code
// in this file. The external references of Swagger specification are resolved.
// The logic of resolving external references is tightly connected to "import-mapping" feature.
// Externally referenced files must be embedded in the corresponding golang packages.
// Urls can be supported but this task was out of the scope.
func GetSwagger() (swagger *openapi3.T, err error) {
	resolvePath := PathToRawSpec("")

	loader := openapi3.NewLoader()
	loader.IsExternalRefsAllowed = true
	loader.ReadFromURIFunc = func(loader *openapi3.Loader, url *url.URL) ([]byte, error) {
		pathToFile := url.String()
		pathToFile = path.Clean(pathToFile)
		getSpec, ok := resolvePath[pathToFile]
		if !ok {
			err1 := fmt.Errorf("path not found: %s", pathToFile)
			return nil, err1
		}
		return getSpec()
	}
	var specData []byte
	specData, err = rawSpec()
	if err != nil {
		return
	}
	swagger, err = loader.LoadFromData(specData)
	if err != nil {
		return
	}
	return
}
